<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buffet Rio Pro - Gest√£o Total</title>
    <style>
        :root { --primaria: #0f172a; --destaque: #10b981; --fundo: #f1f5f9; --borda: #cbd5e1; --branco: #ffffff; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; margin: 0; display: flex; background: var(--fundo); color: #1e293b; }
        
        /* Menu Lateral */
        nav { width: 280px; background: var(--primaria); height: 100vh; position: fixed; padding: 25px; color: white; z-index: 100; }
        nav h2 { font-size: 1.1rem; color: var(--destaque); margin-bottom: 30px; border-bottom: 1px solid #334155; padding-bottom: 10px; }
        .label-grupo { font-size: 0.7rem; color: #94a3b8; text-transform: uppercase; margin: 20px 0 10px; font-weight: bold; }
        .btn-menu { width: 100%; padding: 12px; margin-bottom: 8px; background: #1e293b; border: none; color: white; text-align: left; border-radius: 6px; cursor: pointer; transition: 0.2s; }
        .btn-menu:hover { background: var(--destaque); color: #0f172a; font-weight: bold; }
        .btn-add { background: #6366f1 !important; margin-top: 20px; font-weight: bold; text-align: center !important; }

        /* √Årea de Conte√∫do */
        main { margin-left: 310px; padding: 40px; width: calc(100% - 310px); }
        .card { background: var(--branco); padding: 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); border: 1px solid var(--borda); }
        .caminho { margin-bottom: 20px; font-size: 0.9rem; color: #64748b; }
        .caminho span { cursor: pointer; color: var(--destaque); font-weight: bold; }

        /* Tabelas */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; padding: 15px; background: #f8fafc; border-bottom: 2px solid var(--borda); font-size: 0.8rem; }
        td { padding: 15px; border-bottom: 1px solid #f1f5f9; }
        .linha-clicavel:hover { background: #f8fafc; cursor: pointer; }
        .info-eletro { font-size: 0.8rem; color: #475569; background: #f1f5f9; padding: 6px 10px; border-radius: 4px; border-left: 3px solid var(--destaque); line-height: 1.4; }

        /* Formul√°rio de Cadastro */
        #form-cadastro { display: none; margin-bottom: 30px; border: 2px solid #6366f1; }
        .grid-form { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        input, select, textarea { padding: 10px; border: 1px solid var(--borda); border-radius: 6px; width: 100%; box-sizing: border-box; }
        .btn-salvar { background: var(--destaque); color: #0f172a; border: none; padding: 12px; border-radius: 6px; font-weight: bold; cursor: pointer; grid-column: span 2; }
        
        .alerta { color: #ef4444; font-weight: bold; }
        .btn-qtd { padding: 5px 12px; border: 1px solid #cbd5e1; background: #fff; border-radius: 4px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<nav>
    <h2>BUFFET RIO PRO</h2>
    
    <div class="label-grupo">Gerenciamento</div>
    <button class="btn-menu btn-add" onclick="abrirForm()">‚ûï CADASTRAR NOVO ITEM</button>

    <div class="label-grupo">Armazenamento</div>
    <button class="btn-menu" onclick="trocarCategoria('C√¢mara')">üì¶ Itens de C√¢mara</button>
    <button class="btn-menu" onclick="trocarCategoria('Freezer')">‚ùÑÔ∏è Itens de Freezer</button>
    
    <div class="label-grupo">Operacional</div>
    <button class="btn-menu" onclick="trocarCategoria('Equipamento')">‚ö° Equipamentos</button>
    <button class="btn-menu" onclick="trocarCategoria('Material')">üçΩÔ∏è Materiais / Lou√ßas</button>
</nav>

<main>
    <!-- FORMUL√ÅRIO DE CADASTRO -->
    <div id="form-cadastro" class="card">
        <h3>Novo Item no Invent√°rio</h3>
        <div class="grid-form">
            <input type="text" id="f-nome" placeholder="Nome do Item (Ex: Carne, Forno, Prato)">
            <select id="f-cat">
                <option value="C√¢mara">C√¢mara</option>
                <option value="Freezer">Freezer</option>
                <option value="Equipamento">Equipamento</option>
                <option value="Material">Material</option>
            </select>
            <input type="text" id="f-setor" placeholder="Setor (Ex: Estante A, Gaveta 2)">
            <input type="number" id="f-qtd" placeholder="Quantidade Inicial">
            <input type="number" id="f-min" placeholder="Estoque M√≠nimo">
            <textarea id="f-info" placeholder="Informa√ß√µes T√©cnicas (Voltagem, Manuten√ß√£o, Observa√ß√µes)" style="grid-column: span 2; height: 60px;"></textarea>
            <button class="btn-salvar" onclick="salvarItem()">SALVAR NO SISTEMA</button>
        </div>
    </div>

    <div id="navegacao" class="caminho"></div>
    <div class="card">
        <h1 id="titulo-pagina">Controle Operacional</h1>
        <div id="corpo-pagina">Selecione uma categoria ao lado para gerenciar setores e itens.</div>
    </div>
</main>

<script>
    let estoque = JSON.parse(localStorage.getItem('buffet_rio_v3')) || [
        { id: 1, cat: "Equipamento", setor: "Cozinha", nome: "Forno Turbo", qtd: 1, min: 1, info: "220V - Trif√°sico | Manuten√ß√£o em Mar√ßo" }
    ];

    let catAtual = "";
    let setorAtual = "";

    function abrirForm() {
        const f = document.getElementById('form-cadastro');
        f.style.display = f.style.display === 'block' ? 'none' : 'block';
    }

    function salvarItem() {
        const novo = {
            id: Date.now(),
            nome: document.getElementById('f-nome').value,
            cat: document.getElementById('f-cat').value,
            setor: document.getElementById('f-setor').value,
            qtd: parseInt(document.getElementById('f-qtd').value) || 0,
            min: parseInt(document.getElementById('f-min').value) || 0,
            info: document.getElementById('f-info').value
        };

        if(!novo.nome || !novo.setor) { alert("Preencha Nome e Setor!"); return; }

        estoque.push(novo);
        localStorage.setItem('buffet_rio_v3', JSON.stringify(estoque));
        alert("Item cadastrado com sucesso!");
        abrirForm();
        renderizar();
    }

    function trocarCategoria(cat) {
        catAtual = cat;
        setorAtual = ""; 
        renderizar();
    }

    function renderizar() {
        const titulo = document.getElementById('titulo-pagina');
        const corpo = document.getElementById('corpo-pagina');
        const navBar = document.getElementById('navegacao');

        if (!catAtual) return;

        if (!setorAtual) {
            navBar.innerHTML = `<span onclick="catAtual='';renderizar()">In√≠cio</span> > <b>${catAtual}</b>`;
            titulo.innerText = `Setores em: ${catAtual}`;
            const setores = [...new Set(estoque.filter(i => i.cat === catAtual).map(i => i.setor))];
            let html = `<table><thead><tr><th>Subdivis√£o (Estante/Gaveta)</th><th>A√ß√£o</th></tr></thead><tbody>`;
            setores.forEach(s => {
                html += `<tr class="linha-clicavel" onclick="abrirSetor('${s}')"><td>üìÇ <b>${s}</b></td><td>Abrir ‚Üí</td></tr>`;
            });
            corpo.innerHTML = html + "</tbody></table>";
        } else {
            navBar.innerHTML = `<span onclick="setorAtual='';renderizar()">In√≠cio > ${catAtual}</span> > <b>${setorAtual}</b>`;
            titulo.innerText = `Itens no(a) ${setorAtual}`;
            const itens = estoque.filter(i => i.cat === catAtual && i.setor === setorAtual);
            let html = `<table><thead><tr><th>Item</th><th>Qtd</th><th>Informa√ß√£o T√©cnica/Eletr√¥nica</th><th>A√ß√µes</th></tr></thead><tbody>`;
            itens.forEach(p => {
                html += `<tr>
                    <td><b>${p.nome}</b></td>
                    <td class="${p.qtd <= p.min ? 'alerta' : ''}">${p.qtd}</td>
                    <td><div class="info-eletro">${p.info || '-'}</div></td>
                    <td>
                        <button class="btn-qtd" onclick="ajustar(${p.id}, 1)">+</button>
                        <button class="btn-qtd" onclick="ajustar(${p.id}, -1)">-</button>
                    </td>
                </tr>`;
            });
            corpo.innerHTML = html + "</tbody></table>";
        }
    }

    function abrirSetor(s) { setorAtual = s; renderizar(); }

    function ajustar(id, v) {
        const i = estoque.find(x => x.id === id);
        i.qtd = Math.max(0, i.qtd + v);
        localStorage.setItem('buffet_rio_v3', JSON.stringify(estoque));
        renderizar();
    }
</script>
</body>
</html>

