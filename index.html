<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gest√£o de Buffet Rio - Al√©m do Bolo</title>
  <style>
    :root{--primaria:#0f172a;--destaque:#10b981;--fundo:#f8fafc;--borda:#e2e8f0;--sucesso:#22c55e}
    body{font-family:'Segoe UI',sans-serif;margin:0;display:flex;background:var(--fundo);color:#334155}
    nav{width:320px;background:var(--primaria);height:100vh;position:fixed;padding:18px;color:white;box-shadow:4px 0 10px rgba(0,0,0,.12);overflow:auto}
    nav h2{font-size:1.1rem;color:var(--destaque);margin-bottom:12px;border-bottom:1px solid #1e293b;padding-bottom:10px}
    .label-grupo{font-size:.7rem;color:#64748b;text-transform:uppercase;letter-spacing:1px;margin:12px 0 6px}
    .btn-menu{width:100%;padding:10px;margin-bottom:8px;background:#1e293b;border:0;color:white;text-align:left;border-radius:6px;cursor:pointer;transition:.2s}
    .btn-menu:hover, .btn-menu.active{background:rgba(16,185,129,0.12);color:var(--destaque);font-weight:600}
    .btn-cadastrar{background:var(--destaque);color:white;font-weight:bold;margin-top:10px}
    main{margin-left:360px;padding:28px;width:100%;min-height:100vh}
    .card{background:white;padding:22px;border-radius:10px;border:1px solid var(--borda);box-shadow:0 4px 6px -1px rgba(0,0,0,.06)}
    table{width:100%;border-collapse:collapse;margin-top:12px}
    th{text-align:left;padding:12px;background:#f1f5f9;color:#475569;font-size:.85rem}
    td{padding:12px;border-bottom:1px solid var(--borda)}
    input, select{padding:10px;border:1px solid var(--borda);border-radius:6px;width:100%;box-sizing:border-box;margin-bottom:10px}
    .form-group{margin-bottom:15px}
    .btn-acao{padding:12px 20px;background:var(--destaque);color:white;border:none;border-radius:6px;cursor:pointer;font-weight:bold}
    .badge{padding:4px 8px;border-radius:4px;font-size:0.75rem;font-weight:bold;background:#e2e8f0}
  </style>
</head>
<body>
  <nav id="left-nav">
    <h2>Al√©m do Bolo</h2>

    <div class="label-grupo">A√ß√µes R√°pidas</div>
    <button class="btn-menu btn-cadastrar" onclick="renderCadastro()">‚ûï Novo Item (Auto)</button>

    <div class="label-grupo">Armazenamento</div>
    <button class="btn-menu" onclick="renderEstoque('C√¢mara')">üì¶ Itens de C√¢mara</button>
    <button class="btn-menu" onclick="renderEstoque('Freezer')">‚ùÑÔ∏è Itens de Freezer</button>

    <div class="label-grupo">Operacional</div>
    <button class="btn-menu" onclick="renderEstoque('Equipamento')">‚ö° Equipamentos</button>
    <button class="btn-menu" onclick="renderEstoque('Material')">üçΩÔ∏è Materiais</button>
  </nav>

  <main>
    <div id="main-card" class="card">
      <h1>Bem-vindo ao Sistema</h1>
      <p>Selecione uma categoria ou cadastre um novo item.</p>
    </div>
  </main>

  <script>
    // Banco de dados inicial
    let estoque = JSON.parse(localStorage.getItem('buffet_rio_db')) || [
      { id:1, cat:"C√¢mara", nome:"Carne Bovina", qtd:25, min:10, info:"Fria 1" },
      { id:2, cat:"Equipamento", nome:"Fritadeira", qtd:2, min:1, info:"220V" }
    ];

    // Regras de Classifica√ß√£o Autom√°tica
    const REGRAS = {
      "C√¢mara": ["carne", "frango", "peixe", "queijo", "leite", "laticinio", "presunto"],
      "Freezer": ["polpa", "gelo", "congelado", "sorvete", "a√ßai"],
      "Equipamento": ["fritadeira", "forno", "liquidificador", "batedeira", "fog√£o"],
      "Material": ["prato", "talher", "copo", "ta√ßa", "guardanapo", "sousplat"]
    };

    function salvar() {
      localStorage.setItem('buffet_rio_db', JSON.stringify(estoque));
    }

    function identificarCategoria(nome) {
      nome = nome.toLowerCase();
      for (let cat in REGRAS) {
        if (REGRAS[cat].some(keyword => nome.includes(keyword))) return cat;
      }
      return "C√¢mara"; // Categoria padr√£o caso n√£o identifique
    }

    function renderCadastro() {
      const main = document.getElementById('main-card');
      main.innerHTML = `
        <h1>Cadastrar Novo Item</h1>
        <p>O sistema identificar√° o grupo automaticamente com base no nome.</p>
        <div class="form-group">
          <label>Nome do Item</label>
          <input type="text" id="cad-nome" placeholder="Ex: Carne Bovina, Prato Raso, Polpa de Morango..." onkeyup="sugerirCategoria(this.value)">
        </div>
        <div class="form-group">
          <label>Categoria Detectada</label>
          <div id="cat-badge" class="badge">Aguardando nome...</div>
        </div>
        <div style="display:flex; gap:10px">
          <div style="flex:1">
            <label>Qtd Inicial</label>
            <input type="number" id="cad-qtd" value="0">
          </div>
          <div style="flex:1">
            <label>M√≠nimo</label>
            <input type="number" id="cad-min" value="5">
          </div>
        </div>
        <button class="btn-acao" onclick="confirmarCadastro()">Salvar no Sistema</button>
      `;
    }

    function sugerirCategoria(valor) {
      const badge = document.getElementById('cat-badge');
      if(valor.length > 2) {
        const cat = identificarCategoria(valor);
        badge.innerText = "Destino: " + cat;
        badge.style.background = "#10b981";
        badge.style.color = "white";
      }
    }

    function confirmarCadastro() {
      const nome = document.getElementById('cad-nome').value;
      const qtd = parseInt(document.getElementById('cad-qtd').value);
      const min = parseInt(document.getElementById('cad-min').value);
      
      if(!nome) return alert("Digite um nome!");

      const novoItem = {
        id: Date.now(),
        nome: nome,
        cat: identificarCategoria(nome),
        qtd: qtd,
        min: min,
        info: "Cadastro Manual"
      };

      estoque.push(novoItem);
      salvar();
      alert(`Item "${nome}" cadastrado com sucesso em ${novoItem.cat}!`);
      renderEstoque(novoItem.cat);
    }

    function renderEstoque(categoria) {
      const filtrados = estoque.filter(i => i.cat === categoria);
      const main = document.getElementById('main-card');
      main.innerHTML = `
        <div style="display:flex; justify-content:space-between; align-items:center">
          <h1>${categoria}</h1>
          <button class="btn-acao" style="padding:5px 10px; font-size:0.8rem" onclick="renderCadastro()">+ Adicionar aqui</button>
        </div>
        <table>
          <thead>
            <tr><th>Item</th><th>Qtd</th><th>M√≠n</th><th>Status</th></tr>
          </thead>
          <tbody>
            ${filtrados.map(i => `
              <tr>
                <td>${i.nome}</td>
                <td><b>${i.qtd}</b></td>
                <td>${i.min}</td>
                <td>${i.qtd < i.min ? '<span style="color:red">‚ö†Ô∏è Baixo</span>' : '‚úÖ OK'}</td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      `;
    }
  </script>
</body>
</html>
